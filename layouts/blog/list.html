{{ define "main" }}

{{/* Configuration variables */}}
{{ $cardHeight := 540 }}

{{/* Define search configuration for blog list pages */}}
{{ $searchConfig := dict 
  "enabled" true
  "directories" (slice "blog")
}}

{{ partial "hero_default.html" (dict "Params" .Params "Title" .Title "search" $searchConfig "Site" .Site) }}

{{ if eq (len .Pages) 0 }}
  <div class="wrapper text-center">
    <p class="text-xl font-semibold ">{{ i18n "no_posts_found" }}</p>
  </div>
{{ else }}

  {{/* Custom sorting: posts without dates first, then by date (newest first) */}}
  {{ $sortedPages := .Pages }}
  {{ $pagesWithoutDate := slice }}
  {{ $pagesWithDate := slice }}

  {{ range .Pages }}
    {{ if .Date.IsZero }}
      {{ $pagesWithoutDate = $pagesWithoutDate | append . }}
    {{ else }}
      {{ $pagesWithDate = $pagesWithDate | append . }}
    {{ end }}
  {{ end }}

  {{ $pagesWithDate = $pagesWithDate.ByDate.Reverse }}
  {{ $sortedPages = $pagesWithoutDate | append $pagesWithDate }}

  {{ $paginator := .Paginate $sortedPages 60 }}

  <div class="wrapper grid grid-cols-1 gap-x-8 gap-y-12 md:grid-cols-2 xl:grid-cols-3">
    {{ range $paginator.Pages }}
      <div>
        {{ partial "components/cards/post_card_with_image.html" (dict 
        "page" . 
        "cardHeight" $cardHeight
        "imageWrapperClasses" "max-md:hidden"
        ) }}
      </div>
    {{ end }}
  </div>
  <!-- Pagination -->
  {{ if gt $paginator.TotalPages 1 }}
    {{partial "components/pagination/pagination.html" $paginator }}
  {{ end }}
{{ end }}

{{ if .Content }}
  {{ partial "sections/content/centered.html" (dict 
      "content" .Content
      "bgColor" "bg-gray-50"
      "page" .
  ) }}
{{ end }}

{{ end }}
