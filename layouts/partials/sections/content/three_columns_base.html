{{/*
@section: Three Column Content
@description: A visually appealing layout featuring multiple content cards of varying sizes arranged in a three-column grid pattern, ideal for showcasing features or product highlights.
@params:
  - theme: "light" or "dark" (default: "light") â€” applies dark mode styles if set to "dark"
  - eyebrow: Short text displayed above the main heading (optional, default: empty)
  - heading: Main section heading (optional, default: empty)
  - description: Short description text below the heading (optional, default: empty)
  - headerAlignment: Alignment of the header content, e.g., "left", "center", or "right" (optional, default: "left")
  - headerPadding: Additional CSS classes for header padding (optional, default: "pb-24 lg:pb-32")
  - wrapperPadding: Padding classes for the wrapper div (optional, default: "p-0")
  - imageClasses: Additional CSS classes for card images (optional, default: "rounded-xl")
  - cards: Array of card objects with content (supports unlimited cards)
    - title: Card title text (required)
    - description: Card description text (required)
    - image: URL to image (required)
    - imageAlt: Alt text for the image (optional)
    - url: URL to link the card to, making the entire card clickable (optional)
    - target: Link target attribute for the card (optional, default: "_self")
@example:
  {{ partial "sections/content/three_column_content.html" (dict 
      "theme" "light"
      "eyebrow" "Features" 
      "heading" "Everything you need to build your application"
      "showHeader" true
      "headerAlignment" "left"
      "headerPadding" "pb-24 lg:pb-32"
      "cards" (slice
          (dict
              "title" "Responsive Design" 
              "description" "Our platform automatically adapts to any device or screen size."
              "image" "/images/features/responsive.png"
              "imageAlt" "Responsive design illustration"
              "url" "/features/responsive"
              "target" "_self"
          )
          (dict
              "title" "Analytics" 
              "description" "Detailed insights into your user behavior and application performance."
              "image" "/images/features/analytics.png"
              "imageAlt" "Analytics dashboard"
              "url" "/features/analytics"
              "target" "_self"
          )
          (dict
              "title" "Security" 
              "description" "Enterprise-grade security with end-to-end encryption."
              "image" "/images/features/security.png"
              "imageAlt" "Security shield"
              "url" "/features/security"
              "target" "_blank"
          )
      )
  ) }}
@note: This section uses a dynamic three-column layout to showcase features or product highlights. The layout automatically adapts to any number of cards provided.
*/}}

{{/* Header parameters */}}
{{ $eyebrow := .eyebrow | default "" }}
{{ $heading := .heading | default "" }}
{{ $description := .description | default "" }}
{{ $headerAlignment := .headerAlignment | default "left" }}
{{ $headerPadding := .headerPadding | default "pb-20" }}
{{ $headerWrapperPadding := .headerWrapperPadding | default "p-0" }}
{{ $headingMargin := .headingMargin | default "mt-2.5" }}
{{ $descriptionMargin := .descriptionMargin | default "mt-6" }}
{{ $imageClasses := .imageClasses | default "rounded-xl" }}

{{/* Parse inner content as JSON if provided */}}
{{ $cards := (slice) }}
{{ with .Inner }}
  {{ if . }}
    {{ $cards = . | unmarshal }}
  {{ end }}
{{ end }}

{{/* Content alignment setup */}}
{{ $contentAlignment := .contentAlignment | default "left" }}
{{ $contentAlignmentClass := "" }}
{{ if eq $contentAlignment "center" }}
  {{ $contentAlignmentClass = "text-center" }}
{{ else if eq $contentAlignment "right" }}
  {{ $contentAlignmentClass = "text-right" }}
{{ else }}
  {{ $contentAlignmentClass = "text-left" }}
{{ end }}

{{/* Theme setup */}}
{{ $theme := .theme | default "light" }}
{{ $isDark := eq $theme "dark" }}
{{ $darkClass := cond $isDark "dark" "" }}

{{ $cards := .cards | default (slice) }}

<div class="{{ $darkClass }}">
  <div class="section-bg-light dark:section-bg-dark py-24 sm:py-32">
    <div class="wrapper">
      {{/* Render header if header parameters are provided */}}
        {{ if or $heading $eyebrow $description }}
            {{ partial "layout/headers/simple_with_eyebrow_base.html" (dict 
            "eyebrow" $eyebrow
            "heading" $heading
            "description" $description
            "alignment" $headerAlignment
            "padding" $headerPadding
            "wrapperPadding" $headerWrapperPadding
            "headingMargin" $headingMargin
            "descriptionMargin" $descriptionMargin
            ) }}
        {{ end }}
            <div class="mt-20 grid gap-8 lg:gap-16 md:grid-cols-3">
        {{ range $index, $card := $cards }}
          <div class="relative {{ if $card.url }}group{{ end }} flex flex-col overflow-hidden">
            {{ if $card.url }}
              <a href="{{ partial "helpers/get-translated-url.html" (dict "url" $card.url) }}" target="{{ $card.target | default "_self" }}"{{ if eq ($card.target | default "_self") "_blank" }} rel="noopener noreferrer"{{ end }} class="absolute inset-0 z-10 hover:opacity-90 transition-opacity">
                <span class="sr-only">{{ $card.title }}</span>
              </a>
            {{ end }}
            <div class="flex items-center justify-center {{ if $card.url }}group-hover:opacity-75 transition-opacity{{ end }}">
                {{ partial "components/media/lazyimg.html" (dict "src" $card.image "alt" ($card.imageAlt | default "") "class" $imageClasses) }}
            </div>

            <div class="{{ $contentAlignmentClass }} pt-6">
              {{ if $card.title }}
                <p class="text-base/8 font-semibold tracking-tight text-heading">
                  {{ $card.title }}
                </p>
              {{ end }}
              {{ if $card.description }}
                <span class="max-w-lg text-sm/6 text-secondary font-normal">{{ $card.description }}</span>
              {{ end }}
            </div>
          </div>          
        {{ end }}
      </div>
    </div>
  </div>
</div>
