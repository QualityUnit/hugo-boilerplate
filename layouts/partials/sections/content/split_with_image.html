{{/*
Responsive two-column layout with image and rich content.

Parameters:
- theme: "light" | "dark" | "alternate" (default: "light")
- layout: "image-left" | "image-right" (default: "image-left")
- image, imageAlt: Image settings
- videoUrl: Video URL for embedding (default: "")
- poster: Video poster image URL (default: "")
- videoTitle: Video title text (default: "")
- videoDescription: Video description text (default: "")
- videoLinkUrl: Link to page on site from video overlay (default: "")
- eyebrow, heading, description: Text content
- link, linkText, buttonStyle: CTA button
- markdownContent, contentAsHTML: Main content
- features: [{icon, title, description}]
- numbered_features: [{title, description}] (features with numbers instead of icons)
- stats: [{number, label}]
- quote: {text, author, role, company, avatar}
- sectionPaddingY: Custom vertical padding using Tailwind classes (default: "py-24 lg:py-32")
- Color classes: *Color parameters for styling

Header section parameters:
- headerEyebrow, headerHeading, headerDescription: Header section content
- showHeader: Force header to render even without content
- headerAlignment: "left" (default), "center", or "right" for header text alignment
- headerPadding: Padding classes for the header section (default: "pb-24 lg:pb-32")

Custom Color Classes Documentation:
- text-heading: Primary heading text color (typically dark for contrast)
- text-primary: Brand primary color for accents and CTAs
- text-secondary: Standard body text color (readable gray)
- text-gray-700: Tailwind gray-700 for secondary text
- section-bg-light: Light background for sections

Usage Guidelines:
- Use text-heading for main headings and emphasized text elements
- Use text-primary for brand accents, links, and call-to-action elements
- Use text-secondary for regular paragraph text and descriptions
- Ensure color contrast meets accessibility standards (WCAG AA)

Design Tokens:
- Image dimensions are configurable via variables for easy maintenance
- Spacing values use consistent design system tokens
- Typography tracking and sizing follow brand guidelines
*/}}

{{ $theme := .theme | default "light" }}
{{ $backgroundColor := .backgroundColor | default "" }}
{{ $isDark := eq $theme "dark" }}
{{ $isAlternate := eq $theme "alternate" }}

{{/* Section parameters */}}
{{ $layout := .layout | default "image-left" }}
{{ $image := .image }}
{{ $imageAlt := .imageAlt }}
{{ $videoUrl := .videoUrl | default "" }}
{{ $poster := .poster | default "" }}
{{ $posterHeight := .posterHeight | default "h-[522px]" }}
{{ $videoTitle := .videoTitle | default "" }}
{{ $videoDescription := .videoDescription | default "" }}
{{ $videoLinkUrl := .videoLinkUrl | default "" }}
{{ $eyebrow := .eyebrow }}
{{ $heading := .heading }}
{{ $description := .description }}
{{ $link := .link }}
{{ $linkText := .linkText }}
{{ $linkTarget := .linkTarget | default "_self" }}
{{ $buttonStyle := .buttonStyle | default "primary" }}
{{ $markdownContent := .markdownContent }}
{{ $contentAsHTML := .contentAsHTML | default false }}
{{ $features := .features | default (slice) }}
{{ $numbered_features := .numbered_features | default (slice) }}
{{ $stats := .stats | default (slice) }}
{{ $quote := .quote }}

{{/* Header parameters */}}
{{ $headerEyebrow := .headerEyebrow | default "" }}
{{ $headerHeading := .headerHeading | default "" }}
{{ $headerDescription := .headerDescription | default "" }}
{{ $showHeader := .showHeader | default false }}
{{ $headerAlignment := .headerAlignment | default "left" }}
{{ $headerPadding := .headerPadding | default "pb-24 lg:pb-32" }}

{{/* Design tokens and configurable dimensions */}}
{{ $sectionPaddingY := .sectionPaddingY | default "py-24 lg:py-32" }}
{{ $mediaContainerPaddingY := "py-6" }}
{{ $contentPaddingY := "py-4" }}
{{ $contentLeftPadding := "lg:pl-20" }}
{{ $headingTracking := "tracking-[-2.832px]" }}


<div class="split-with-image-section {{ if $backgroundColor }}{{ $backgroundColor }}{{ else if $isDark }}dark section-bg-dark{{ else if $isAlternate }}section-bg-alternate{{ else }}section-bg-light{{ end }} {{ $sectionPaddingY }}">
  {{/* Render header if header parameters are provided */}}
  {{ if or $headerHeading $headerEyebrow $headerDescription $showHeader }}
    {{ partial "layout/headers/simple_with_eyebrow_base.html" (dict 
      "eyebrow" $headerEyebrow
      "heading" $headerHeading 
      "description" $headerDescription
      "alignment" $headerAlignment
      "padding" $headerPadding
    ) }}
  {{ end }}
  <div class="wrapper lg:flex lg:justify-between lg:items-stretch {{ if not $videoUrl }}gap-x-8{{ end }}{{ if eq $layout "image-right" }} lg:flex-row-reverse{{ end }}">
    <div class="lg:flex lg:w-1/2 lg:items-start lg:shrink lg:grow-0 xl:relative xl:inset-y-0 {{ if eq $layout "image-right" }}xl:left-0{{ else }}xl:right-0{{ end }}">
      <div class="relative rounded-lg {{ $mediaContainerPaddingY }} flex items-start justify-center w-full overflow-hidden mx-auto max-w-[38rem] max-h-[35rem] {{ if $videoUrl }}h-full{{ end }}">
        {{ if $videoUrl }}
          <div class="relative flex w-full h-full">
            {{/* Display video */}}
            {{ partial "components/media/video.html" (dict 
                  "src" $videoUrl 
                  "poster" $poster
                  "posterHeight" $posterHeight
                  "title" $videoTitle
                  "class" "rounded-xl h-full"
                  "provider" "youtube"
                  "useLightbox" true
                  "showPlayOverlay" true
                  "playBtnClass" "white-circle-bounce w-[7.75rem] h-[7.75rem] rounded-full backdrop-blur-sm"
                  "playBtnInnerClass" "bg-white relative w-24 h-24 rounded-full hover:scale-105 transition-transform duration-300"
                  "svgClass" "size-12 ml-1 text-primary absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"
              ) }}
              {{ if or $videoTitle $videoDescription }}
              <div class="absolute left-5 bottom-5 flex items-end z-30">
                  <div class="text-white">
                  {{ if $videoTitle }}
                      <h3 class="font-semibold text-opacity-75">{{ $videoTitle }}</h3>
                  {{ end }}
                  {{ if $videoDescription }}
                      <p class="text-sm mt-1.5 tracking-[-0.28px]">
                          {{ if $videoLinkUrl }}
                          <a href="{{ $videoLinkUrl }}" class="flex items-center text-white hover:underline">
                              {{ $videoDescription }}
                              <span class="ml-1 btn-arrow">
                                  {{ partial "components/media/icon.html" (dict "icon" "arrow-up-right" "class" "w-5 h-5 p-0.5") }}
                              </span>
                          </a>
                          {{ else }}
                              {{ $videoDescription }}
                          {{ end }}
                      </p>
                  {{ end }}
                  </div>
              </div>
            {{ end }}
          </div>
        {{ else if $image }}
          {{/* Display image */}}
          {{ if $link }}
            <a href="{{ $link }}" target="{{ $linkTarget }}" class="w-full flex items-center justify-center">
          {{ end }}
              {{ partial "components/media/lazyimg.html" (dict
                "src" $image
                "alt" $imageAlt
                "class" "object-contain rounded-lg"
              ) }}
          {{ if $link }}
            </a>
          {{ end }}
        {{ end }}
      </div>
    </div>
    <div class="lg:flex lg:w-1/2 lg:items-center {{ if $videoUrl }}lg:pr-8{{ end }}">
      <div class="{{ $contentPaddingY }} lg:w-full lg:flex-none {{ if eq $layout "image-right" }}lg:pl-0{{ else }}{{ $contentLeftPadding }} {{ end }}">
        {{ if $eyebrow }}
          <p class="text-base/7 font-semibold product-text">{{ $eyebrow }}</p>
        {{ end }}
        {{ if $heading}}
          <h2 class="mt-3  mb-0 text-4xl font-semibold {{ $headingTracking }}  text-heading leading-none text-pretty sm:text-5xl">{{ $heading }}</h2>
        {{ end }}
        {{ if $description }}
          <p class="mt-6 text-lg/7 text-secondary">{{ $description | safeHTML }}</p>
        {{ end }}

        {{/* Button */}}
        {{ if $link }}
        <div class="mt-6">
          {{ partial "components/buttons/buttons.html" (dict
            "text" $linkText
            "url" $link
            "target" $linkTarget
            "variant" $buttonStyle
          ) }}
        </div>
        {{ end }}

        {{/* Main content */}}
        {{ if $markdownContent }}
          <div class="mt-10 max-w-full text-secondary lg:max-w-full [&_p]:mb-5 [&_h1]:mb-5 [&_h2]:mb-5 [&_h3]:mb-5 [&_h4]:mb-5 [&_h5]:mb-5 [&_h6]:mb-5 [&_ul]:mb-5 [&_ol]:mb-5 [&_*:last-child]:mb-0">
            {{ if $contentAsHTML }}
                {{ $markdownContent | safeHTML }}
            {{ else }}
                {{ $markdownContent | markdownify }}
            {{ end }}
          </div>
        {{ end }}

        {{/* Features */}}
        {{ if $features }}
        <dl class="mt-10 max-w-full space-y-8 text-lg/7 text-secondary lg:max-w-full">
          {{ range $features }}
          <div class="relative pl-9">
            <dt class="inline {{ if .description }}font-bold{{ end }} text-heading">
              {{ if .icon }}
                <span class="absolute left-1 top-1 size-5 text-primary">
                  {{ partial "components/media/icon.html" (dict "icon" .icon) }}
                </span>
              {{ end }}
              {{ .title }}.
            </dt>
            {{ if .description }}
              <dd class="inline">{{ .description }}</dd>
            {{ end }}
          </div>
          {{ end }}
        </dl>
        {{ end }}

        {{/* Numbered Features */}}
        {{ if $numbered_features }}
          <ol class="mt-10 max-w-full space-y-3 text-lg/7 text-secondary lg:max-w-full">
            {{ range $index, $feature := $numbered_features }}
              <li class="relative pl-9">
                <span class="inline-flex text-heading font-bold">
                  <span class="absolute left-1 top-1/2 -translate-y-1/2 w-5 h-5 text-[10px] flex justify-center items-center text-white rounded-full bg-primary">{{ add $index 1 }}</span>
                  {{ .title }}.
                </span>
                <span class="inline">{{ .description }}</span>
              </li>
            {{ end }}
          </ol>
        {{ end }}

        {{/* Stats */}}
        {{ if $stats }}
          <dl class="mt-10 grid max-w-full grid-cols-1 gap-8 sm:grid-cols-2">
            {{ range $stats }}
            <div class="flex flex-col gap-y-3 border-l border-gray-900/10 pl-6">
              <dt class="text-sm/6 text-secondary">{{ .label }}</dt>
              <dd class="order-first text-3xl font-semibold tracking-tight text-heading">{{ .number }}</dd>
            </div>
            {{ end }}
          </dl>
        {{ end }}

        {{/* Quote */}}
        {{ if $quote }}
          <div class="lg:max-w-full">
            <figure class="mt-10 border-l border-gray-200 pl-8 text-secondary">
              <blockquote class="text-base/7">
                <p>"{{ $quote.text }}"</p>
              </blockquote>
              <figcaption class="mt-6 flex gap-x-4 text-sm/6">
                {{ if $quote.avatar }}
                <img src="{{ $quote.avatar }}" alt="{{ $quote.author }}" class="size-6 flex-none rounded-full" />
                {{ end }}
                <div>
                  <span class="font-semibold text-heading">{{ $quote.author }}</span>
                  {{ if $quote.role }} – {{ $quote.role }}{{ end }}{{ if $quote.company }}, {{ $quote.company }}{{ end }}
                </div>
              </figcaption>
            </figure>
          </div>
        {{ end }}
      </div>
    </div>
  </div>
</div>