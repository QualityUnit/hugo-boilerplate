{{/*
Responsive hero section with split layout - content left, image right.

Parameters:
- theme: "light" | "dark" | "alternate" (default: "light")
- image, imageAlt: Image settings
- eyebrow, heading, description: Text content
- cta: Call-to-action buttons
  - primary: Primary button (text, url)
  - secondary: Secondary button (text, url)
- tags: Array of tags (optional), will create tag links to /tags/[tag-name]/
- categories: Array of categories (optional), will create category links to /categories/[category-name]
- typewriter: Object with typewriter effect configuration (optional)
  - enabled: Boolean to enable/disable the effect (default: false)
  - words: Number of words to animate (default: 1)
  - speed: Typing speed in ms (default: 100)
  - deleteSpeed: Deleting speed in ms (default: 50)
  - pause: Pause duration in ms (default: 2000)
  - color: Color class for animated text (default: "text-indigo-600")
  - wordAlternatives: Comma separated words to alternate with
- sectionPaddingY: Custom vertical padding using Tailwind classes (default: "py-24 lg:py-32")
- backgroundColor: Custom background color class

Custom Color Classes Documentation:
- text-heading: Primary heading text color (typically dark for contrast)
- text-primary: Brand primary color for accents and CTAs
- text-secondary: Standard body text color (readable gray)
- text-gray-700: Tailwind gray-700 for secondary text
- section-bg-light: Light background for sections

Usage Guidelines:
- Use text-heading for main headings and emphasized text elements
- Use text-primary for brand accents, links, and call-to-action elements
- Use text-secondary for regular paragraph text and descriptions
- Ensure color contrast meets accessibility standards (WCAG AA)

Design Tokens:
- Image dimensions are configurable via variables for easy maintenance
- Spacing values use consistent design system tokens
- Typography tracking and sizing follow brand guidelines
- Image is always positioned on the right side
*/}}

{{ $theme := .theme | default "light" }}
{{ $backgroundColor := .backgroundColor | default "" }}
{{ $isDark := eq $theme "dark" }}
{{ $isAlternate := eq $theme "alternate" }}

{{/* Section parameters */}}
{{ $image := .image }}
{{ $imageAlt := .imageAlt }}
{{ $eyebrow := .eyebrow }}
{{ $heading := .heading }}
{{ $description := .description }}
{{ $cta := .cta }}
{{ $tags := .tags | default (slice) }}
{{ $categories := .categories | default (slice) }}
{{ $typewriter := .typewriter | default dict }}

{{/* Typewriter configuration with defaults */}}
{{ $typewriter := merge (dict "enabled" false) $typewriter }}
{{ $typewriter := merge (dict "words" 1) $typewriter }}
{{ $typewriter := merge (dict "speed" 100) $typewriter }}
{{ $typewriter := merge (dict "deleteSpeed" 50) $typewriter }}
{{ $typewriter := merge (dict "pause" 2000) $typewriter }}
{{ $typewriter := merge (dict "color" "text-indigo-600") $typewriter }}
{{ $typewriter := merge (dict "wordAlternatives" "") $typewriter }}

{{/* Design tokens and configurable dimensions */}}
{{ $sectionPaddingY := .sectionPaddingY | default "py-12 lg:py-16" }}
{{ $imageContainerPaddingY := "py-6" }}
{{ $contentPaddingY := "py-4" }}
{{ $contentLeftPadding := "lg:pr-20" }}
{{ $headingTracking := "tracking-[-2.832px]" }}

{{/* Image processing */}}
{{ $imageSrc := "" }}
{{ $finalImageAlt := $heading | default .Title | default "Hero image" }}
{{ if $image }}
  {{ if reflect.IsMap $image }}
    {{ $imageSrc = $image.url }}
    {{ $finalImageAlt = $image.alt | default $finalImageAlt }}
  {{ else }}
    {{ $imageSrc = $image }}
  {{ end }}
{{ else }}
  {{ $imageSrc = "https://images.unsplash.com/photo-1487017159836-4e23ece2e4cf?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=2102&q=80" }}
{{ end }}

{{ if $imageAlt }}
  {{ $finalImageAlt = $imageAlt }}
{{ end }}

<div class="split-with-image-hero {{ if $backgroundColor }}{{ $backgroundColor }}{{ else if $isDark }}dark section-bg-dark{{ else if $isAlternate }}section-bg-alternate{{ else }}section-bg-light{{ end }} {{ $sectionPaddingY }}">
  <div class="wrapper lg:flex lg:justify-between lg:items-stretch gap-x-8 lg:flex-row-reverse">
    <div class="lg:flex lg:w-1/2 lg:items-start lg:shrink lg:grow-0 xl:relative xl:inset-y-0 xl:left-0">
      <div class="relative rounded-lg {{ $imageContainerPaddingY }} flex items-start justify-center w-full overflow-hidden mx-auto max-w-[38rem] max-h-[35rem]">
        {{ partial "components/media/lazyimg.html" (dict
          "src" $imageSrc
          "alt" $finalImageAlt
          "class" "object-contain rounded-lg"
          "noLazy" true
        ) }}
      </div>
    </div>
    <div class="lg:flex lg:w-1/2 lg:items-center">
      <div class="{{ $contentPaddingY }} lg:w-full lg:flex-none {{ $contentLeftPadding }}">
        {{ if $eyebrow }}
          <p class="text-base/7 font-semibold text-primary">{{ $eyebrow }}</p>
        {{ end }}
        {{ if $heading }}
          <h1 class="mt-6 text-5xl font-semibold {{ $headingTracking }} text-heading leading-none text-pretty sm:text-7xl"{{ if $typewriter.enabled }} data-typewriter data-typewriter-words="{{ $typewriter.words }}" data-typewriter-word-alternatives="{{$typewriter.wordAlternatives}}" data-typewriter-speed="{{ $typewriter.speed }}" data-typewriter-delete-speed="{{ $typewriter.deleteSpeed }}" data-typewriter-pause="{{ $typewriter.pause }}" data-typewriter-color="{{ $typewriter.color }}"{{ end }}>{{ $heading }}</h1>
        {{ end }}
        {{ if $description }}
          <p class="mt-8 text-lg/7 text-secondary sm:text-xl/8">{{ $description | safeHTML }}</p>
        {{ end }}

        {{/* Tags and Categories */}}
        {{ if or $categories $tags }}
        <div class="mt-6 flex flex-col gap-4">
          {{ if $categories }}
          <div class="flex flex-wrap gap-2">
            {{ range $categories }}
            <a href="{{ print "/categories/" (. | urlize) | relLangURL }}/" class="inline-flex items-center rounded-full bg-indigo-50 px-3 py-1 text-sm font-medium text-primary-dark hover:bg-indigo-100">
            {{ . }}
            </a>
            {{ end }}
          </div>
          {{ end }}

          {{ if $tags }}
            {{ partial "sections/tags/tags.html" (dict "tags" $tags "maxTags" 4 ) }}
          {{ end }}
        </div>
        {{ end }}

        {{/* CTA Buttons */}}
        {{ if $cta }}
          {{ $showPrimaryCta := and (isset $cta "primary") (isset $cta.primary "url") (isset $cta.primary "text") (ne $cta.primary.url "") (ne $cta.primary.text "") }}
          {{ $showSecondaryCta := and (isset $cta "secondary") (isset $cta.secondary "url") (isset $cta.secondary "text") (ne $cta.secondary.url "") (ne $cta.secondary.text "") }}
          {{ if or $showPrimaryCta $showSecondaryCta }}
          <div class="mt-10 flex items-center gap-x-6">
            {{ if $showPrimaryCta }}
              {{ partial "components/buttons/buttons.html" (dict
                "text" $cta.primary.text
                "url" $cta.primary.url
                "variant" "primary"
                "size" "xl"
              ) }}
            {{ end }}
            {{ if $showSecondaryCta }}
              {{ partial "components/buttons/buttons.html" (dict
                "text" $cta.secondary.text
                "url" $cta.secondary.url
                "variant" "secondary"
                "showArrow" true
                "size" "xl"
              ) }}
            {{ end }}
          </div>
          {{ end }}
        {{ end }}
      </div>
    </div>
  </div>
</div>

