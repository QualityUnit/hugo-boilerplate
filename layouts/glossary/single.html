{{ define "main" }}

<!-- Breadcrumbs -->
{{ $breadcrumbItems := slice (dict "title" (i18n "home_title") "url" .Site.Home.RelPermalink) }}
{{ $path := "" }}
{{ $parts := split (strings.TrimPrefix "/" .RelPermalink) "/" }}
{{ range $index, $part := first (sub (len $parts) 1) $parts }}
  {{ $path = printf "%s/%s" $path $part }}
  {{ with $.Site.GetPage $path }}
    {{ $breadcrumbItems = $breadcrumbItems | append (dict "title" .Title "url" .RelPermalink) }}
  {{ end }}
{{ end }}


{{ partial "components/breadcrumbs/basic" (dict "items" $breadcrumbItems) }}


<!-- Hero Section with Split Image -->
{{ $shortDescription := .Params.shortDescription | default "" }}
{{ if .Params.image }}
{{ partial "sections/hero/split_with_image.html" (dict
"heading" .Params.term
"description" (markdownify $shortDescription)
"eyebrow" (i18n "glossary_eyebrow")
"image" .Params.image
) }}
{{ else }}
{{ partial "layout/headers/centered_with_eyebrow.html" (dict
"heading" .Params.term
"description" (markdownify $shortDescription)
"eyebrow" (i18n "glossary_eyebrow")
) }}
{{ end }}

<!-- Tags Section -->
<div class="bg-white py-12">
  <div class="mx-auto max-w-7xl px-6 lg:px-8">
    <div class="mx-auto max-w-2xl text-center">
      <div class="mt-6 flex flex-wrap justify-center gap-4">
        {{ if .Params.tags }}
        <div class="flex flex-wrap items-center justify-center gap-2">
          {{ range .Params.tags }}
          <a href="{{ print "/tags/" (. | urlize) | relLangURL }}"
            class="inline-flex items-center rounded-full bg-gray-100 px-3 py-0.5 text-sm font-medium text-gray-800 hover:bg-gray-200 transition-colors">
            {{ . }}
          </a>
          {{ end }}
        </div>
        {{ end }}
      </div>
    </div>
  </div>
</div>

<!-- Main Content -->
<div class="bg-white px-6 py-32 lg:px-8 mx-auto max-w-7xl">
  <div
    class="mx-auto prose prose-lg prose-indigo prose-headings:font-semibold prose-a:text-indigo-600 prose-a:no-underline hover:prose-a:underline prose-img:rounded-xl">
    {{ .Content | partial "utils/linkbuilding" (dict "content" .Content "page" .) | safeHTML }}
  </div>
</div>

<!-- CTA Section -->
{{ $ctaHeading := .Params.ctaHeading | default (i18n "cta_default_heading") }}
{{ $ctaDescription := .Params.ctaDescription | default (i18n "cta_default_description") }}
{{ $ctaPrimaryText := .Params.ctaPrimaryText | default (i18n "cta_default_primary_text") }}
{{ $ctaPrimaryURL := .Params.ctaPrimaryURL | default "/resources/" }}
{{ $ctaSecondaryText := .Params.ctaSecondaryText | default (i18n "cta_default_secondary_text") }}
{{ $ctaSecondaryURL := .Params.ctaSecondaryURL | default "/contact/" }}
{{ $showCTA := .Params.showCTA | default true }}

{{ if $showCTA }}
{{ partial "sections/cta/simple_centered_on_dark.html" (dict
"heading" $ctaHeading
"description" $ctaDescription
"primaryCta" (dict
"text" $ctaPrimaryText
"url" $ctaPrimaryURL
)
"secondaryCta" (dict
"text" $ctaSecondaryText
"url" $ctaSecondaryURL
)
) }}
{{ end }}

<!-- FAQ Section Side by Side -->
{{ if .Params.faq }}
{{ partial "sections/faq/side-by-side.html" (dict
"heading" (i18n "faq_heading")
"faqs" .Params.faq
"bgColor" "bg-white"
"page" .
) }}
{{ end }}

<!-- Related Content Section -->
{{ partial "utils/related_content.html" . }}

{{ end }}