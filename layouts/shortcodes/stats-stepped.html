{{/*
Stepped Stats Shortcode
@description: Dynamic statistics block with custom card appearance, using the partial sections/stats/stepped.html
@params:
  - heading/title: Section heading (optional)
  - description: Section description (optional)
  - padding: Tailwind padding classes (optional, default: "py-24")
  - show-heading/showHeading: Whether to show heading (default: true)
  - stats: array of objects (via inner JSON), each with:
      - value: Value
      - title: Label
      - description: Description
      - width: Card width classes (optional)
      - verticalSpacing: Vertical spacing classes (optional)
@example:
{{< stats-stepped 
  heading="Our results in numbers"
  description="We help businesses achieve outstanding results."
  padding="py-16 sm:py-24"
  show-heading="true"
>}}
  [
    {"value": "10M+", "title": "Customers", "description": "Trust our platform", "verticalSpacing": "gap-y-10"},
    {"value": "$50M", "title": "Revenue", "description": "Generated by our clients", "verticalSpacing": "gap-y-44"},
    {"value": "99.99%", "title": "Uptime", "description": "Service reliability", "verticalSpacing": "gap-y-12"}
  ]
{{< /stats-stepped >}}
*/}}
{{/* Stepped Stats Shortcode (based on partial logic) */}}

{{ $heading := .Get "heading" | default (.Get "title") | default "" }}
{{ $description := .Get "description" | default "" }}
{{ $padding := .Get "padding" | default "py-24" }}
{{ $showHeading := .Get "show-heading" | default (.Get "showHeading") | default "true" }}

{{/* Collect stats from inner JSON array */}}
{{ $stats := slice }}
{{ with .Inner }}
  {{ if . }}
    {{ $stats = . | unmarshal }}
  {{ end }}
{{ end }}

{{ partial "sections/stats/stepped.html" (dict 
  "heading" $heading
  "description" $description
  "padding" $padding
  "showHeading" (or (eq $showHeading true) (eq $showHeading "true"))
  "stats" $stats
) }}
