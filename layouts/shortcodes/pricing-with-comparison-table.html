{{ $params := .Page.Params }}

{{ $heading := .Get "heading" | default $params.heading | default (.Get 1) | default "Pricing that grows with you" }}
{{ $description := .Get "description" | default $params.description | default (.Get 2) | default "Choose an affordable plan that's packed with the best features for engaging your audience, creating customer loyalty, and driving sales." }}
{{ $backgroundColor := .Get "backgroundColor" | default $params.backgroundColor | default (.Get 3) | default "white" }}
{{ $taglineColor := .Get "taglineColor" | default $params.taglineColor | default (.Get 4) | default "indigo-600" }}
{{ $headingColor := .Get "headingColor" | default $params.headingColor | default (.Get 5) | default "gray-900" }}
{{ $descriptionColor := .Get "descriptionColor" | default $params.descriptionColor | default (.Get 6) | default "gray-600" }}
{{ $checkColor := .Get "checkColor" | default $params.checkColor | default (.Get 7) | default "indigo-600" }}
{{ $dashColor := .Get "dashColor" | default $params.dashColor | default (.Get 8) | default "gray-400" }}
{{ $tiers := .Get "tiers" | default $params.tiers | default "" }}

{{ $featureCategories := slice }}

{{ if $params.faq }}
  {{ $featureCategories = $featureCategories | append (dict
    "name" "Features"
    "features" (slice
      (dict
        "name" "AI Studio Access"
        "tiers" (dict "Photomatic AI Starter" true "Photomatic AI Pro" true "Photomatic AI Premium" true)
      )
      (dict
        "name" "Generate Images"
        "tiers" (dict "Photomatic AI Starter" "Up to 100" "Photomatic AI Pro" "Up to 500" "Photomatic AI Premium" "Up to 5000")
      )
      (dict
        "name" "Access to All Latest AI Models"
        "tiers" (dict "Photomatic AI Starter" true "Photomatic AI Pro" true "Photomatic AI Premium" true)
      )
      (dict
        "name" "Train Characters"
        "tiers" (dict "Photomatic AI Starter" "1" "Photomatic AI Pro" "50" "Photomatic AI Premium" "100")
      )
    )
  ) }}
{{ end }}

{{ partial "sections/pricing/with_comparison_table.html" (dict
  "heading" $heading
  "description" $description
  "backgroundColor" $backgroundColor
  "taglineColor" $taglineColor
  "headingColor" $headingColor
  "descriptionColor" $descriptionColor
  "checkColor" $checkColor
  "dashColor" $dashColor
  "tiers" $tiers
  "featureCategories" $featureCategories
) }}

{{/*
  USAGE EXAMPLE:

  {{< pricing-with-comparison-table >}}

  Or with custom parameters:

  {{< pricing-with-comparison-table
    tagline="Our Plans"
    heading="Simple, transparent pricing"
    description="Choose the plan that fits your needs."
    backgroundColor="gray-50"
    taglineColor="blue-600"
    headingColor="gray-900"
    descriptionColor="gray-600"
    checkColor="indigo-600"
    dashColor="gray-400"
  >}}

  Note: The tiers and feature categories are automatically pulled from page parameters.
  You can define these in your markdown file frontmatter like:

  +++
  title = "Pricing"
  tagline = "Simple and transparent"
  heading = "Pricing Plans"
  description = "Choose the plan that fits your needs."

  [[tiers]]
  name = "Basic"
  id = "tier-basic"
  price = "$19"
  interval = "/month"
  emphasized = false
  # other tier properties...

  [[tiers]]
  name = "Pro"
  # other tier properties...

  [[tiers]]
  name = "Enterprise"
  # other tier properties...

  # Optional: Define FAQ questions which will be used to generate feature categories
  [[faq]]
  question = "Question 1"
  answer = "Answer 1"

  [[faq]]
  question = "Question 2"
  answer = "Answer 2"
  +++
*/}}
